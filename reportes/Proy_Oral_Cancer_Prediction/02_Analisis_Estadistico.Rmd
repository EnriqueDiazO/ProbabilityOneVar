---
title: "GuÃ­a de GrÃ¡ficos para el AnÃ¡lisis Exploratorio de Datos (EDA)"
author: "Enrique DÃ­az Ocampo"
date: "`r Sys.Date()`"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
# ğŸ“Œ ConfiguraciÃ³n inicial
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

## 1ï¸âƒ£ **IntroducciÃ³n**
Esta guÃ­a proporciona una serie de grÃ¡ficos para realizar un **AnÃ¡lisis Exploratorio de Datos (EDA)** en diferentes niveles:

- **AnÃ¡lisis Unidimensional:** DistribuciÃ³n de una sola variable.

- **AnÃ¡lisis Multivariado:** RelaciÃ³n entre dos o mÃ¡s variables.

- **VisualizaciÃ³n con `ggplot2`** para explorar patrones en los datos.

Esta guÃ­a te ayudarÃ¡ a seleccionar el grÃ¡fico mÃ¡s adecuado segÃºn el tipo de variable analizada.

---

## 2ï¸âƒ£ **Carga de LibrerÃ­as y ConfiguraciÃ³n**

```{r}
# ğŸ“Œ Cargar configuraciÃ³n global
# Contiene rutas de directorios, opciones de visualizaciÃ³n y otros parÃ¡metros relevantes
install.packages("here",dependencies=TRUE)
library(here)
source(here("reportes/Proy_Oral_Cancer_Prediction/00_CONFIGURACION.r"))
```

```{r}
# ğŸ“Œ Cargar librerÃ­as necesarias
library(here)           # Manejo de rutas dinÃ¡micas
library(janitor)        # Limpieza de nombres de columnas
library(summarytools)   # Resumen estadÃ­stico detallado
library(ggplot2)        # GrÃ¡ficos
library(dplyr)          # ManipulaciÃ³n de datos
library(plotly)         # GÅ•aficos Interactivos

# ğŸ“Œ ConfiguraciÃ³n de grÃ¡ficos globales
theme_set(theme_minimal())


# ğŸ“Œ Cargar scripts de preprocesamiento
source(here("scripts/utils.r"))
source(here("scripts/1_preprocesamiento_esp_dataset.r"))
source(here("scripts/2_analisis_grÃ¡fico.r"))
```

---

## 3ï¸âƒ£ **Carga y Preprocesamiento de Datos**
```{r}
# ğŸ“Œ Cargar y preprocesar el dataset
dataset_oral_cancer <- preprocesar_datos(here("datasets/oral_cancer_data_limpio.csv"), "Oral Cancer")
```

ğŸ“Œ **Â¿QuÃ© hace esta funciÃ³n?**

âœ” Limpia los nombres de las columnas.

âœ” Convierte variables categÃ³ricas en factores.

âœ” Filtra valores invÃ¡lidos.

âœ” Retorna un dataset listo para anÃ¡lisis.

---

## 4ï¸âƒ£ **AnÃ¡lisis Unidimensional**
El anÃ¡lisis unidimensional permite estudiar la distribuciÃ³n de una sola variable.

### ğŸ“Œ **Boxplot para una variable cuantitativa**

ğŸ“Œ **Ãštil para:** Detectar valores atÃ­picos y distribuciÃ³n de datos.

```{r}
# Crear el boxplot usando la funciÃ³n crear_boxplot
p_boxplot_edad <- crear_boxplot(data = dataset_oral_cancer, y = "age", 
                                title = "DistribuciÃ³n de la Edad de los Pacientes", 
                                xlab = "Pacientes", ylab = "Edad", 
                                colores = "lightblue", rotar_x = FALSE)

# Guardar la imagen en la carpeta usando here()
guardar_grafico(p_boxplot_edad, here("reportes/Proy_Oral_Cancer_Prediction/resultados_generados/boxplot_edad.png"))

# Convertir a grÃ¡fico interactivo
p_boxplot_edad_interactivo <- convertir_interactivo(p_boxplot_edad)
p_boxplot_edad_interactivo
```


### ğŸ“Œ **Histograma para una variable cuantitativa**

ğŸ“Œ **Ãštil para:** Observar la distribuciÃ³n de frecuencia de una variable numÃ©rica.

```{r}
# Crear el histograma usando la funciÃ³n crear_histograma
p_histograma_edad <- crear_histograma(data = dataset_oral_cancer, x = "age", 
                                      title = "DistribuciÃ³n de Edad de los Pacientes", 
                                      xlab = "Edad", ylab = "Frecuencia", 
                                      binwidth = 5, colores = "lightblue", densidad = TRUE)

# Guardar la imagen en la carpeta usando here()
guardar_grafico(p_histograma_edad, here("reportes/Proy_Oral_Cancer_Prediction/resultados_generados/histograma_edad.png"))

# Convertir a grÃ¡fico interactivo
p_histograma_edad_interactivo <- convertir_interactivo(p_histograma_edad)
p_histograma_edad_interactivo
```

### ğŸ“Œ **Histograma para una variable cuantitativa por categorias**


```{r}
# Definir colores personalizados para gÃ©nero
colores_genero <- c("Male" = "blue", "Female" = "red")

# Crear el histograma usando la funciÃ³n crear_histograma
p_histograma_edad_genero <- crear_histograma(data = dataset_oral_cancer, x = "age", fill = "gender", 
                                             title = "Histograma de Edad por GÃ©nero", 
                                             xlab = "Edad", ylab = "Frecuencia", 
                                             binwidth = 1, colores = colores_genero)

# Guardar la imagen en la carpeta usando here()
guardar_grafico(p_histograma_edad_genero, here("reportes/Proy_Oral_Cancer_Prediction/resultados_generados/histograma_edad_genero.png"))

# Convertir a grÃ¡fico interactivo
p_histograma_edad_genero_interactivo <- convertir_interactivo(p_histograma_edad_genero)
p_histograma_edad_genero_interactivo
```

### ğŸ“Œ **Barplot para una variable cualitativa**

ğŸ“Œ **Ãštil para:** Mostrar la frecuencia de categorÃ­as en una variable cualitativa.

```{r}
# Crear el barplot usando la funciÃ³n crear_barplot
p_barplot_genero <- crear_barplot(data = dataset_oral_cancer, x = "gender", fill = "gender", 
                                  title = "DistribuciÃ³n de GÃ©nero", 
                                  xlab = "GÃ©nero", ylab = "Frecuencia", 
                                  colores = c("Male" = "cyan", "Female" = "pink"))

# Guardar la imagen en la carpeta usando here()
guardar_grafico(p_barplot_genero, here("reportes/Proy_Oral_Cancer_Prediction/resultados_generados/barplot_genero.png"))

# Convertir a grÃ¡fico interactivo
p_barplot_genero_interactivo <- convertir_interactivo(p_barplot_genero)
p_barplot_genero_interactivo

```




```{r}
# Crear el barplot cruzado usando la funciÃ³n crear_barplot
p_barplot_tabaco_genero <- crear_barplot(data = dataset_oral_cancer, x = "gender", fill = "tobacco_use", 
                                         title = "Consumo de Tabaco por GÃ©nero", 
                                         xlab = "GÃ©nero", ylab = "Frecuencia", 
                                         colores = c("Yes" = "cyan", "No" = "green"), dodge = TRUE)

# Guardar la imagen en la carpeta usando here()
guardar_grafico(p_barplot_tabaco_genero, here("reportes/Proy_Oral_Cancer_Prediction/resultados_generados/barplot_tabaco_genero.png"))

# Convertir a grÃ¡fico interactivo
p_barplot_tabaco_genero_interactivo <- convertir_interactivo(p_barplot_tabaco_genero)
p_barplot_tabaco_genero_interactivo
```

### ğŸ“Œ GrÃ¡fico Interactivo de DistribuciÃ³n por PaÃ­s (Country)

```{r}
# Crear grÃ¡fico de barras para Country usando la funciÃ³n crear_barplot
p_country <- crear_barplot(data = dataset_oral_cancer, x = "country", fill = "country", 
                           title = "DistribuciÃ³n de Pacientes por PaÃ­s", 
                           xlab = "PaÃ­s", ylab = "Frecuencia", 
                           colores = NULL, voltear = TRUE, legend_position = "none")


# Guardar la imagen usando la funciÃ³n guardar_grafico
guardar_grafico(p_country, here("reportes/Proy_Oral_Cancer_Prediction/resultados_generados/barplot_country.png"), ancho = 8, alto = 6)

# Convertir a grÃ¡fico interactivo usando la funciÃ³n convertir_interactivo
p_country_interactivo <- convertir_interactivo(p_country)
p_country_interactivo

```

---

## 5ï¸âƒ£ **AnÃ¡lisis Multivariado**
El anÃ¡lisis multivariado permite explorar relaciones entre dos o mÃ¡s variables.

### ğŸ“Œ **Cualitativa vs Cualitativa** (GrÃ¡fico de barras cruzado)

ğŸ“Œ **Ãštil para:** Comparar la frecuencia de categorÃ­as en dos variables cualitativas.
```{r}
# Crear el barplot cruzado usando la funciÃ³n crear_barplot
p_barplot_tabaco_pais <- crear_barplot(data = dataset_oral_cancer, x = "country", fill = "tobacco_use", 
                                         title = "Consumo de Tabaco por PaÃ­s", 
                                         xlab = "GÃ©nero", ylab = "Frecuencia", 
                                         colores = c("Yes" = "cyan", "No" = "green"), dodge = TRUE)

# Rotar las etiquetas del eje X
p_barplot_tabaco_pais <- p_barplot_tabaco_pais +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))  # Rotar 45 grados y ajustar alineaciÃ³n

# Guardar la imagen en la carpeta usando here()
guardar_grafico(p_barplot_tabaco_genero, here("reportes/Proy_Oral_Cancer_Prediction/resultados_generados/barplot_tabaco_pais.png"))

# Convertir a grÃ¡fico interactivo
p_barplot_tabaco_pais_interactivo <- convertir_interactivo(p_barplot_tabaco_pais)
p_barplot_tabaco_pais_interactivo
```


### ğŸ“Œ **Cuantitativa vs Cualitativa** (Boxplot)
```{r}
# Definir colores personalizados para etapa de cÃ¡ncer
etapa_cancer <- c("0" = "darkorange", "1" = "dodgerblue", "2" = "cyan", "3" = "blue", "4" = "black")

# Crear el boxplot usando la funciÃ³n crear_boxplot
p_boxplot_tumor_etapa <- crear_boxplot(data = dataset_oral_cancer, x = "cancer_stage", y = "tumor_size_cm", fill = "cancer_stage", 
                                       title = "DistribuciÃ³n del TamaÃ±o del Tumor por Etapa del CÃ¡ncer", 
                                       xlab = "Etapa del CÃ¡ncer", ylab = "TamaÃ±o del Tumor (cm)", 
                                       colores = etapa_cancer)

# Guardar la imagen en la carpeta usando here()
guardar_grafico(p_boxplot_tumor_etapa, here("reportes/Proy_Oral_Cancer_Prediction/resultados_generados/boxplot_tumor_etapa.png"))

# Convertir a grÃ¡fico interactivo
p_boxplot_tumor_etapa_interactivo <- convertir_interactivo(p_boxplot_tumor_etapa)
p_boxplot_tumor_etapa_interactivo

```
ğŸ“Œ **Ãštil para:** Comparar la distribuciÃ³n de una variable numÃ©rica en funciÃ³n de una variable categÃ³rica.

### ğŸ“Œ **Cuantitativa vs Cuantitativa** (Diagrama de dispersiÃ³n)
```{r}
# Crear el scatterplot usando la funciÃ³n crear_scatterplot
p_scatter_edad_tumor <- crear_scatterplot(data = dataset_oral_cancer, x = "age", y = "tumor_size_cm", 
                                          title = "RelaciÃ³n entre Edad y TamaÃ±o del Tumor", 
                                          xlab = "Edad", ylab = "TamaÃ±o del Tumor (cm)", 
                                          colores = "steelblue")

# Guardar la imagen en la carpeta usando here()
guardar_grafico(p_scatter_edad_tumor, here("reportes/Proy_Oral_Cancer_Prediction/resultados_generados/scatter_edad_tumor.png"))

# Convertir a grÃ¡fico interactivo
p_scatter_edad_tumor_interactivo <- convertir_interactivo(p_scatter_edad_tumor)
p_scatter_edad_tumor_interactivo

```
ğŸ“Œ **Ãštil para:** Identificar tendencias y relaciones entre dos variables numÃ©ricas.

---

## **ğŸ“Œ ConclusiÃ³n**
Esta guÃ­a ha mostrado cÃ³mo aplicar distintos tipos de grÃ¡ficos segÃºn el tipo de anÃ¡lisis deseado:

âœ… **AnÃ¡lisis Unidimensional:** Estudio de una sola variable.
âœ… **AnÃ¡lisis Multivariado:** ExploraciÃ³n de relaciones entre variables.
âœ… **VisualizaciÃ³n con `ggplot2`** para obtener insights del dataset.

