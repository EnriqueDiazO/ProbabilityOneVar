---
title: "CÃ¡lculo de Probabilidades en Career Success"
author: "Enrique DÃ­az Ocampo"
date: "`r Sys.Date()`"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

# 1ï¸âƒ£ IntroducciÃ³n

Este anÃ¡lisis tiene como objetivo calcular probabilidades condicionales en el dataset de "Career Success", respondiendo preguntas como:

- Â¿CuÃ¡l es la probabilidad de tener Ã©xito en la carrera si el individuo tiene un alto nivel de educaciÃ³n?

- Â¿CÃ³mo influye la experiencia laboral en el Ã©xito profesional?

Estos cÃ¡lculos son clave para evaluar factores que contribuyen al Ã©xito profesional y mejorar la toma de decisiones en la planificaciÃ³n de carreras.


# 2ï¸âƒ£ Carga de LibrerÃ­as y ConfiguraciÃ³n
```{r}
install.packages("here",dependencies = TRUE)
library(here)           # Manejo de rutas dinÃ¡micas
source(here("reportes/Proy_Education_Career_Success/00_CONFIGURACION.r"))
```


```{r}
# ğŸ“Œ Cargar librerÃ­as necesarias

library(janitor)        # Limpieza de nombres de columnas
library(summarytools)   # Resumen estadÃ­stico detallado
library(ggplot2)        # GrÃ¡ficos
library(dplyr)          # ManipulaciÃ³n de datos
library(plotly)         # GrÃ¡ficos Interactivos

# ğŸ“Œ ConfiguraciÃ³n de grÃ¡ficos globales
theme_set(theme_minimal())


# ğŸ“Œ Cargar scripts de preprocesamiento
source(here("scripts/utils.r"))
source(here("scripts/1_preprocesamiento_esp_dataset.r"))
source(here("scripts/3_analisis_probabilidad.r"))
```


```{r}
# ğŸ“Œ Cargar dataset limpio
dataset_career_success <- preprocesar_datos(here("datasets/education_data_limpio.csv"), "Education Career Success")
```



3ï¸âƒ£ CÃ¡lculo de Probabilidades Condicionales

Analizamos la relaciÃ³n entre factores de Ã©xito y el Ã©xito profesional.

ğŸ“Œ Probabilidad de Ã‰xito Profesional dado un Alto Nivel de EducaciÃ³n

```{r}
# Calcular probabilidades
resultados_university_vs_satisfaction <- calcular_probabilidades(
  data = dataset_career_success,
  condicionante = "university_ranking",
  objetivo = "career_satisfaction",
  bins = 5  # Dividir en 5 intervalos
)

# Mostrar resultados
cat("Tabla de contingencia:\n")
print(resultados_university_vs_satisfaction$tabla_contingencia)

cat("\nProbabilidades condicionales:\n")
print(resultados_university_vs_satisfaction$probabilidades_condicionales)

cat("\nProbabilidades marginales de career_success:\n")
print(resultados_university_vs_satisfaction$probabilidades_marginales)
```


```{r}
resultados_gender_vs_salary <- calcular_probabilidades(
  data = dataset_career_success,
  condicionante = "gender",
  objetivo = "starting_salary",
  bins = 5  # Dividir en 5 intervalos
)

# Mostrar resultados
cat("Tabla de contingencia:\n")
print(resultados_gender_vs_salary$tabla_contingencia)

cat("\nProbabilidades condicionales:\n")
print(resultados_gender_vs_salary$probabilidades_condicionales)

cat("\nProbabilidades marginales de career_success:\n")
print(resultados_gender_vs_salary$probabilidades_marginales)
```

4ï¸âƒ£ VisualizaciÃ³n de Resultados

ğŸ“Œ GrÃ¡fico de Probabilidad de SatisfacciÃ³n Laboral segÃºn el Ranking de la Universidad
```{r}
p_university_vs_satisfaction <- visualizar_probabilidad_condicional(
  data = dataset_career_success,
  condicionante = "university_ranking",
  objetivo = "career_satisfaction",
  titulo = "Probabilidad  SatisfacciÃ³n Laboral segÃºn Ranking de la Universidad",
  xlab = "Ranking de la Universidad (Intervalos)",
  guardar = TRUE,
  ruta_guardado = here("reportes/Proy_Education_Career_Success/resultados_generados/probabilidad_condicional_university_vs_satisfaction.png"),
  bins = 5  # Dividir en 5 intervalos
)

# Mostrar grÃ¡fico interactivo
p_university_vs_satisfaction
```



```{r}
p_gender_vs_salary <- visualizar_probabilidad_condicional(
  data = dataset_career_success,
  condicionante = "gender",
  objetivo = "starting_salary",
  titulo = "Probabilidad  Salario inicial segÃºn GÃ©nero",
  xlab = "GÃ©nero",
  guardar = TRUE,
  ruta_guardado = here("reportes/Proy_Education_Career_Success/resultados_generados/probabilidad_condicional_gender_vs_salary.png"),
  bins = 5  # Dividir en 5 intervalos
)

# Mostrar grÃ¡fico interactivo
p_gender_vs_salary
```