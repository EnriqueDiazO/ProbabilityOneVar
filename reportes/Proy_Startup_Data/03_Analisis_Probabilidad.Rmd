---
title: "CÃ¡lculo de Probabilidades en Startup Data"
author: "Enrique DÃ­az Ocampo"
date: "`r Sys.Date()`"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```


# 1ï¸âƒ£ IntroducciÃ³n

Este anÃ¡lisis tiene como objetivo calcular probabilidades condicionales en el dataset Startup Data, respondiendo preguntas como:

- Â¿CuÃ¡l es la probabilidad de que una startup sea rentable dado su nÃºmero de rondas de financiamiento?

- Â¿CÃ³mo influye la cantidad de empleados en la rentabilidad de la startup?

- Â¿CuÃ¡l es la probabilidad de que una startup con alto market share tenga un alto revenue?

Estos cÃ¡lculos permiten evaluar factores clave que impactan el Ã©xito de una startup y ayudar en la toma de decisiones estratÃ©gicas.

# 2ï¸âƒ£ Carga de LibrerÃ­as y ConfiguraciÃ³n

```{r}
# ğŸ“Œ Cargar configuraciÃ³n global
# Contiene rutas de directorios, opciones de visualizaciÃ³n y otros parÃ¡metros relevantes
install.packages("here",dependencies=TRUE)
library(here)
source(here("reportes/Proy_Startup_Data/00_CONFIGURACION.r"))
```
source(here("reportes/Proy_Startup_Data/00_CONFIGURACION.r"))
```

```{r}
# ğŸ“Œ Cargar librerÃ­as necesarias
library(here)           # Manejo de rutas dinÃ¡micas
library(janitor)        # Limpieza de nombres de columnas
library(summarytools)   # Resumen estadÃ­stico detallado
library(ggplot2)        # GrÃ¡ficos
library(dplyr)          # ManipulaciÃ³n de datos
library(plotly)         # GrÃ¡ficos Interactivos

# ğŸ“Œ ConfiguraciÃ³n de grÃ¡ficos globales
theme_set(theme_minimal())

# ğŸ“Œ Cargar scripts de configuraciÃ³n y preprocesamiento

source(here("scripts/utils.r"))
source(here("scripts/1_preprocesamiento_esp_dataset.r"))
source(here("scripts/3_analisis_probabilidad.r"))

```

# 3ï¸âƒ£ Carga y Preprocesamiento de Datos

```{r}
# ğŸ“Œ Cargar dataset limpio
dataset_startup <- preprocesar_datos(here("datasets/startup_data_limpio.csv"), "Startup Data")
```

# 4ï¸âƒ£ CÃ¡lculo de Probabilidades Condicionales

Analizamos la relaciÃ³n entre variables clave del Ã©xito en startups.

## ğŸ“Œ Probabilidad de Rentabilidad dado el NÃºmero de Rondas de Financiamiento


```{r}
# Calcular probabilidades condicionales
resultados_financiamiento_vs_rentabilidad <- calcular_probabilidades(
  data = dataset_startup,
  condicionante = "funding_rounds",
  objetivo = "profitable",
  bins = 5  # Dividir en 5 intervalos
)

# Mostrar resultados
cat("Tabla de contingencia:\n")
print(resultados_financiamiento_vs_rentabilidad$tabla_contingencia)

cat("\nProbabilidades condicionales:\n")
print(resultados_financiamiento_vs_rentabilidad$probabilidades_condicionales)

cat("\nProbabilidades marginales de rentabilidad:\n")
print(resultados_financiamiento_vs_rentabilidad$probabilidades_marginales)

```


## ğŸ“Œ Probabilidad de Rentabilidad dado el NÃºmero de Empleados

```{r}
# Calcular probabilidades condicionales
resultados_empleados_vs_rentabilidad <- calcular_probabilidades(
  data = dataset_startup,
  condicionante = "employees",
  objetivo = "profitable",
  bins = 5  # Dividir en 5 intervalos
)

# Mostrar resultados
cat("Tabla de contingencia:\n")
print(resultados_empleados_vs_rentabilidad$tabla_contingencia)

cat("\nProbabilidades condicionales:\n")
print(resultados_empleados_vs_rentabilidad$probabilidades_condicionales)

cat("\nProbabilidades marginales de rentabilidad:\n")
print(resultados_empleados_vs_rentabilidad$probabilidades_marginales)

```

## ğŸ“Œ Probabilidad de Alto Revenue dado un Market Share Elevado

```{r}
# Calcular probabilidades condicionales
resultados_marketshare_vs_revenue <- calcular_probabilidades(
  data = dataset_startup,
  condicionante = "market_share_percent",
  objetivo = "revenue_m_usd",
  bins = 5  # Dividir en 5 intervalos
)

# Mostrar resultados
cat("Tabla de contingencia:\n")
print(resultados_marketshare_vs_revenue$tabla_contingencia)

cat("\nProbabilidades condicionales:\n")
print(resultados_marketshare_vs_revenue$probabilidades_condicionales)

cat("\nProbabilidades marginales de revenue:\n")
print(resultados_marketshare_vs_revenue$probabilidades_marginales)

```

# 5ï¸âƒ£ VisualizaciÃ³n de Resultados

ğŸ“Œ Probabilidad de Rentabilidad segÃºn el NÃºmero de Rondas de Financiamiento

```{r}
p_financiamiento_vs_rentabilidad <- visualizar_probabilidad_condicional(
  data = dataset_startup,
  condicionante = "funding_rounds",
  objetivo = "profitable",
  titulo = "AnÃ¡lisis Rentabilidad segÃºn el NÃºmero de Rondas de Financiamiento",
  xlab = "NÃºmero de Rondas de Financiamiento",
  guardar = TRUE,
  ruta_guardado = here("reportes/Proy_Startup_Data/resultados_generados/probabilidad_condicional_financiamiento_vs_rentabilidad.png"),
  bins = 5
)

# Mostrar grÃ¡fico interactivo
p_financiamiento_vs_rentabilidad
```


ğŸ“Œ Probabilidad de Rentabilidad segÃºn el NÃºmero de Empleados

```{r}
p_empleados_vs_rentabilidad <- visualizar_probabilidad_condicional(
  data = dataset_startup,
  condicionante = "employees",
  objetivo = "profitable",
  titulo = "Probabilidad de Rentabilidad segÃºn el NÃºmero de Empleados",
  xlab = "NÃºmero de Empleados (Intervalos)",
  guardar = TRUE,
  ruta_guardado = here("reportes/Proy_Startup_Data/resultados_generados/probabilidad_condicional_empleados_vs_rentabilidad.png"),
  bins = 5
)

# Mostrar grÃ¡fico interactivo
p_empleados_vs_rentabilidad

```



ğŸ“Œ Probabilidad de Alto Revenue segÃºn Market Share

```{r}
p_marketshare_vs_revenue <- visualizar_probabilidad_condicional(
  data = dataset_startup,
  condicionante = "market_share_percent",
  objetivo = "revenue_m_usd",
  titulo = "Probabilidad de Alto Revenue segÃºn Market Share",
  xlab = "Market Share (%)",
  guardar = TRUE,
  ruta_guardado = here("reportes/Proy_Startup_Data/resultados_generados/probabilidad_condicional_marketshare_vs_revenue.png"),
  bins = 5
)

# Mostrar grÃ¡fico interactivo
p_marketshare_vs_revenue

```

